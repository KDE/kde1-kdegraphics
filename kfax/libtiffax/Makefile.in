# $Header$
#

SHELL	= /bin/sh
NULL	=
CC	= @CC@
AR	= ar
AROPTS	= rc
RANLIB	= @RANLIB@
INSTALL	= @INSTALL@

IPATH	= -I. 
CFLAGS	=  -O2
SRCDIR  = 

SRCS	= \
	tif_aux.c \
	tif_close.c \
	tif_codec.c \
	tif_compress.c \
	tif_dir.c \
	tif_dirinfo.c \
	tif_dirread.c \
	tif_dirwrite.c \
	tif_dumpmode.c \
	tif_error.c \
	tif_fax3.c \
	tif_fax3sm.c \
	tif_getimage.c \
	tif_jpeg.c \
	tif_flush.c \
	tif_lzw.c \
	tif_next.c \
	tif_open.c \
	tif_packbits.c \
	tif_predict.c \
	tif_print.c \
	tif_read.c \
	tif_swab.c \
	tif_strip.c \
	tif_thunder.c \
	tif_tile.c \
	tif_unix.c \
	tif_version.c \
	tif_warning.c \
	tif_write.c \
	tif_zip.c \
	${NULL}
OBJS	= \
	tif_aux.o \
	tif_close.o \
	tif_codec.o \
	tif_compress.o \
	tif_dir.o \
	tif_dirinfo.o \
	tif_dirread.o \
	tif_dirwrite.o \
	tif_dumpmode.o \
	tif_error.o \
	tif_fax3.o \
	tif_fax3sm.o \
	tif_getimage.o \
	tif_jpeg.o \
	tif_flush.o \
	tif_lzw.o \
	tif_next.o \
	tif_open.o \
	tif_packbits.o \
	tif_predict.o \
	tif_print.o \
	tif_read.o \
	tif_swab.o \
	tif_strip.o \
	tif_thunder.o \
	tif_tile.o \
	tif_unix.o \
	tif_version.o \
	tif_warning.o \
	tif_write.o \
	tif_zip.o \
	${NULL}
TARGETS	= libtif.a

all:	${TARGETS}


libtif.a: ${OBJS}
	${AR} ${AROPTS} libtif.a $?
	${RANLIB} libtif.a

${OBJS}: tiffio.h tiff.h tif_dir.h
${OBJS}: tiffcomp.h tiffiop.h tiffconf.h

tif_version.o: version.h

#
# The finite state machine tables used by the G3/G4 decoders
# are generated by the mkg3states program.  On systems without
# make these rules have to be manually carried out.
#
tif_fax3sm.c: mkg3states.c tif_fax3.h
	${CC} -o mkg3states ${CFLAGS} mkg3states.c
	rm -f tif_fax3sm.c; ./mkg3states -c const tif_fax3sm.c

tif_aux.o: tif_aux.c
	${CC} -c ${CFLAGS} tif_aux.c
tif_close.o: tif_close.c
	${CC} -c ${CFLAGS} tif_close.c
tif_codec.o: tif_codec.c
	${CC} -c ${CFLAGS} tif_codec.c
tif_compress.o: tif_compress.c
	${CC} -c ${CFLAGS} tif_compress.c
tif_dir.o: tif_dir.c
	${CC} -c ${CFLAGS} tif_dir.c
tif_dirinfo.o: tif_dirinfo.c
	${CC} -c ${CFLAGS} tif_dirinfo.c
tif_dirread.o: tif_dirread.c
	${CC} -c ${CFLAGS} tif_dirread.c
tif_dirwrite.o: tif_dirwrite.c
	${CC} -c ${CFLAGS} tif_dirwrite.c
tif_dumpmode.o: tif_dumpmode.c
	${CC} -c ${CFLAGS} tif_dumpmode.c
tif_error.o: tif_error.c
	${CC} -c ${CFLAGS} tif_error.c
tif_fax3.o: tif_fax3.c t4.h tif_fax3.h
	${CC} -c ${CFLAGS} tif_fax3.c
tif_getimage.o: tif_getimage.c
	${CC} -c ${CFLAGS} tif_getimage.c

#tif_jpeg.o: tif_jpeg.c @DEPEND_JPEGLIB@
tif_jpeg.o: tif_jpeg.c 
	${CC} -c ${CFLAGS} tif_jpeg.c
tif_flush.o: tif_flush.c
	${CC} -c ${CFLAGS} tif_flush.c
tif_lzw.o: tif_lzw.c tif_predict.h
	${CC} -c ${CFLAGS} tif_lzw.c
tif_next.o: tif_next.c
	${CC} -c ${CFLAGS} tif_next.c
tif_open.o: tif_open.c
	${CC} -c ${CFLAGS} tif_open.c
tif_packbits.o: tif_packbits.c
	${CC} -c ${CFLAGS} tif_packbits.c
tif_predict.o: tif_predict.c tif_predict.h
	${CC} -c ${CFLAGS} tif_predict.c
tif_print.o: tif_print.c
	${CC} -c ${CFLAGS} tif_print.c
tif_read.o: tif_read.c
	${CC} -c ${CFLAGS} tif_read.c
tif_swab.o: tif_swab.c
	${CC} -c ${CFLAGS} tif_swab.c
tif_strip.o: tif_strip.c
	${CC} -c ${CFLAGS} tif_strip.c
tif_thunder.o: tif_thunder.c
	${CC} -c ${CFLAGS} tif_thunder.c
tif_tile.o: tif_tile.c
	${CC} -c ${CFLAGS} tif_tile.c
tif_unix.o: tif_unix.c
	${CC} -c ${CFLAGS} tif_unix.c
tif_version.o: tif_version.c
	${CC} -c ${CFLAGS} tif_version.c
tif_warning.o: tif_warning.c
	${CC} -c ${CFLAGS} tif_warning.c
tif_write.o: tif_write.c
	${CC} -c ${CFLAGS} tif_write.c
#tif_zip.o: tif_zip.c tif_predict.h @DEPEND_ZLIB@
tif_zip.o: tif_zip.c tif_predict.h 
	${CC} -c ${CFLAGS} tif_zip.c

tif_apple.o: tif_apple.c
	${CC} -c ${CFLAGS} tif_apple.c
tif_atari.o: tif_atari.c
	${CC} -c ${CFLAGS} tif_atari.c
tif_msdos.o: tif_msdos.c
	${CC} -c ${CFLAGS} tif_msdos.c
tif_vms.o: tif_vms.c
	${CC} -c ${CFLAGS} tif_vms.c
tif_win3.o: tif_win3.c
	${CC} -c ${CFLAGS} tif_win3.c

INCS	= tiff.h tiffio.h

install:

clean:
	rm -f ${TARGETS} ${OBJS} core a.out mkg3states tif_fax3sm.c version.c *.a
distclean:
	rm -f ${TARGETS} ${OBJS} core a.out mkg3states tif_fax3sm.c version.c *.a Makefile

